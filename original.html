<!DOCTYPE html>
<html>
  <head>
    <title>Bun Bun Bake Shop</title>
    <link rel="stylesheet" href="style.css" type="text/css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Italiana&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav class="main-nav">
      <a href="index.html"
        ><img
          src="/Images/Bun Bun Bake Shop.png"
          class="logo"
          alt="Bun Bun Bake Shop logo"
      /></a>
      <ul>
        <li><a href="list.html">Cinnamon rolls</a></li>
        <li><a href="about.html">About us</a></li>
        <li>
          <a
            href="cart.html"
            onmouseenter="showPopup()"
            onmouseleave="hidePopup()"
            ><img src="/Images/bx_bx-cart.svg" alt="add to cart icon"
          /></a>
          <div class="index-wrapper">
            <div id="item-number">1</div>
          </div>
        </li>
      </ul>
    </nav>

    <!-- The following code is for the shopping cart popup -->

    <div class="cart-pop-up">
      <div
        class="position-wrapper"
        onmouseenter="showPopup()"
        onmouseleave="hidePopup()"
      >
        <div class="cart-pop-up-list">
          <h4 class="cart-pop-up-header">items in cart</h4>

          <div class="items-list"></div>

          <div class="cart-pop-up-empty">
            <img
              class="cart-pop-up-image"
              src="/Images/empty-cart.png"
              alt="product image"
            />
            <div class="cart-pop-up-item-details">
              <h5>the cart is empty!</h5>
            </div>
          </div>

          <div class="cart-pop-up-buttons">
            <h6 id="cart-total" class="hidden">total: $0.00</h6>
            <a
              class="primary-button cart-pop-up-primary-button"
              href="list.html"
              >Reveal the rolls</a
            >
          </div>
        </div>
      </div>
    </div>

    <!-- The following code is for the all product details. -->

    <section class="details-section" onload="renderDetails()">
      <div class="details-img">
        <a href="list.html">‚Üê Back</a>
        <img
          id="product-image"
          src="/Images/temp.png"
          alt="original cinnamon roll"
        />
      </div>
      <div class="details-text">
        <h4 id="roll-name"></h4>
        <p id="roll-desc"></p>
        <h6>Allergen Information</h6>
        <ul id="roll-allergen">
          <!-- <li>Milk</li> -->
        </ul>

        <div class="details-selector">
          <p>Pick a glazing:</p>
          <div class="selector">
            <select id="glazing" name="glazing" onchange="setTotal()">
              <option value="none">--select a glazing--</option>
              <option value="none">None</option>
              <option value="sugar">Sugar-milk</option>
              <option value="vanilla">Vanilla-milk</option>
              <option value="chocolate">Double-chocolate</option>
            </select>
            <img src="/Images/double arrow.svg" />
          </div>
        </div>

        <div class="details-selector">
          <p>Pick a box:</p>
          <div class="selector">
            <select id="number" name="number" onchange="setTotal()">
              <option value="1">--select a box--</option>
              <option value="1">Box of 1</option>
              <option value="3">Box of 3</option>
              <option value="6">Box of 6</option>
              <option value="12s">Box of 12</option>
            </select>
            <img src="/Images/double arrow.svg" />
          </div>
        </div>

        <div class="details-buttons">
          <h6 id="total">Total: $0.00</h6>
          <a class="primary-button details-primary-button" onclick="addToCart()"
            >Add to cart</a
          >
        </div>
      </div>
    </section>

    <section class="footer-main">
      <div class="footer">
        <p class="highlight">Store Hours</p>
        <p>
          Monday - Saturday<br />
          9AM - 8PM
        </p>
        <p>412.123.4567</p>
      </div>
      <div class="footer">
        <p class="highlight">Bun Bun Bake Shop</p>
        <p>42 Newmansland <br />Pittsburgh PA 15201</p>
      </div>
      <div class="footer">
        <a class="social" target="_blank" href="https://facebook.com">
          Facebook
        </a>
        <a class="social" target="_blank" href="https://linkedin.com">
          LinkedIn
        </a>
        <a class="social" target="_blank" href="https://twitter.com">Twitter</a>
        <a class="social" target="_blank" href="https://instagram.com">
          Instagram
        </a>
      </div>
    </section>
    <!-- <script src="details.js" type="text/javascript"></script> -->
    <script src="main.js" type="text/javascript"></script>
    <script>
      window.onload = function () {
        const img = document.getElementById("product-image");
        const rollName = document.getElementById("roll-name");
        const rollDesc = document.getElementById("roll-desc");
        const rollAllergen = document.getElementById("roll-allergen");
        const selectFlavor = localStorage.getItem("selectedFlavor");
        let title = "";
        let desc = "";
        let imgSrc = "";
        let allergen = [];
        for (product of flavors) {
          if (product.name == selectFlavor) {
            title = product.title;
            desc = product.desc;
            imgSrc = product.image;
            allergen = product.allergen;
          }
        }
        img.setAttribute("src", imgSrc);
        rollName.innerHTML = title;
        rollDesc.innerHTML = desc;
        for (item of allergen) {
          let allergenItem = document.createElement("li");
          allergenItem.innerHTML = item;
          rollAllergen.appendChild(allergenItem);
          // rollAllergen.appendChild(`<li>${item}</li>`);
        }
      };
    </script>
  </body>
</html>
